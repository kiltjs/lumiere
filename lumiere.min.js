!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.lumiere=e()}(this,function(){"use strict";return function(n,e,t){var i=n.requestFrame,o=n.cancel;if("now"in e==0){var r=t();e.timing&&e.timing.navigationStart&&(r=e.timing.navigationStart),e.now=function(){return t()-r}}function a(n){return n}return function(n,t,r,u){var c,m,f=[],w=function(){r&&r(),f.length&&f.forEach(function(n){n()})};return u=u||a,t(0===n?1:0),n>0?(c=e.now(),m=i(function o(){var r=e.now()-c;r>=n?(t(1),w()):(t(u(r/n)),m=i(o))})):w(),{then:function(n){f.push(n)},cancel:function(n){o(m)}}}}(function(n){if(n)return n;n={};for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)n.requestFrame=window[t[i]+"RequestAnimationFrame"],n.cancel=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];return n.requestFrame||(n.requestFrame=function(n,t){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){n(i+o)},o);return e=i+o,r},n.cancel=function(n){clearTimeout(n)}),n}(window.requestAnimationFrame?{requestFrame:window.requestAnimationFrame,cancel:window.cancelAnimationFrame}:null),"performance"in window?window.performance:{},Date.now||function(){return(new Date).getTime()})});