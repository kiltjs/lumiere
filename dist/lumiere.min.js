!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.lumiere=e()}(this,function(){"use strict";return function(n,e,t){var i=n.requestFrame,o=n.cancel;if("now"in e==0){var r=t();e.timing&&e.timing.navigationStart&&(r=e.timing.navigationStart),e.now=function(){return t()-r}}function a(n,e){for(var t=0,i=n.length;t<i;t++)n[t](e)}return function(n,t,r){var u,c,m=[],f=[];return r=r||function(n){return n},n>0?(t(0),u=e.now(),c=i(function o(){var f=e.now()-u;f>=n?(t(1),a(m,n)):(t(r(f/n)),c=i(o))})):a(m,1),{then:function(n,e){return"function"==typeof n&&m.push(n),"function"==typeof e&&f.push(e),this},cancel:function(){c&&o(c),c=null,a(f,n)}}}}(function(n){if(n)return n;n={};for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)n.requestFrame=window[t[i]+"RequestAnimationFrame"],n.cancel=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];return n.requestFrame||(n.requestFrame=function(n,t){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){n(i+o)},o);return e=i+o,r},n.cancel=function(n){clearTimeout(n)}),n}(window.requestAnimationFrame?{requestFrame:window.requestAnimationFrame,cancel:window.cancelAnimationFrame}:null),"performance"in window?window.performance:{},Date.now||function(){return(new Date).getTime()})});